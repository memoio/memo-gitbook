# Computing Power Platform

Computing Power Platform是一个为计算节点和用户提供交易市场的综合系统，Computing Power Platform要求任何计算节点在注册时提供SGX远程证明，确保计算节点能够提供TEE环境，从而保证用户个人数据在AI训练中不会泄露。此外，用户在创建订单并在计算节点中执行AI训练时，计算节点需要定期提交算力证明，确保计算节点的算力真实性。

## 角色设计

在Computing Power Platform中存在多种角色，其中包括用户，算力资源提供者，验证者。如果是计算资源需求者，则注册为用户；如果是设备提供者，则注册为算力资源提供者；若提供信息管理服务，则注册为验证者。

### 用户

用户是Computing Power Platform最终服务对象，绝大部分功能和机制都是为了更好地服务用户，并且确保用户在使用Computing Power Platform服务时的安全性。因此服务请求由用户发起并且需要用户支付一定的费用。

用户需要根据算力资源提供者的算力大小，即CPU/GPU型号，支付一定的费用后与算力资源提供者签订订单。订单激活后，您可以开始在计算节点上部署应用程序并将您的个人数据通过安全信道传输到算力资源提供者的机器上，从而利用购买的计算资源进行计算或者AI训练。

用户为订单支付的代币将根据为用户提供的实际服务时长进行结算。算力资源提供者需要每隔一段时间提交算力证明，只有提交正确的证明，算力资源提供者才会接收到部分订单金额。

### 算力资源提供者

算力资源提供者为Computing Power Platform中的用户提供实际算力设备，例如CPU/GPU。利用容器编排软件将现有的硬件资源（包括处理器、内存、存储、显卡等）进行组织，并启动网关服务对外提供各种API接口，实现身份认证、应用部署、应用访问以及算力验证功能。

在部署本地基础设施并启动网关服务后，算力资源提供者还需要将自己的节点信息注册到区块链上并附带SGX远程证明，实现节点的公开以及可信执行环境的验证。并且为了预防算力资源提供者在后续过程中作恶，需要算力资源提供者在注册时质押一定的代币。

在应用部署时，从部署请求中提供的YAML文件URL下载资源描述文件，节点再与容器编排软件交互，将资源描述文件中描述的应用部署到本地环境，从而完成算力服务的提供。

### 验证者

验证者主要参与Computing Power Platform的证明验证，包括TEE证明以及算力证明。验证者需要定期对算力资源提供者发起挑战，已验证算力资源提供者提供的算力真实性。此外，验证者还会验证算力资源提供者提交到链上的TEE证明。

## 算力证明

算力证明，即工作量证明是一种需要大量计算资源才能解决的加密难题，因此验证该加密难题的结果，即可验证CPU/GPU的算力。工作量证明依赖于哈希算法的不可逆性，这意味着只能从原始数据计算出相应的哈希值，而无法从哈希值逆向推导出原始数据。其次，哈希算法具有雪崩效应，即输入数据的微小变化会导致散列值的巨大差异。

这两种特性意味着，若要计算指定哈希值的原始数据，唯一的办法是不停地改变原始数据并执行哈希计算，并将哈希结果和指定哈希值对比。对于指定哈希值来说，每一次哈希都有1/2^256^的概率得到指定哈希值，因此往往需要2^256^次哈希计算才能计算出与指定哈希值对应的原始数据，并且这2^256^次哈希计算相互之间完全不影响。并且哈希函数可以在CPU/GPU中并行计算，因此够真实反应CPU/GPU的真实算力水平。

## 可信执行环境

可信执行环境是中央处理器中隔离的执行环境，能够确保执行程序以及数据的完整性和机密性，因此能够在不泄露用户数据的前提下获得预期的结构。此外，可信执行环境还提供远程认证功能，远程认证功能允许TEE节点生成计算环境报告并提交上链，从而允许验证节点验证计算结果的正确性以及计算环境的私密性。